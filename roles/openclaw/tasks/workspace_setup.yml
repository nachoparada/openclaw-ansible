- name: Create workspace directory
  ansible.builtin.file:
    path: "{{ openclaw_config_dir }}/workspace"
    state: directory
    owner: "{{ openclaw_user }}"
    group: "{{ openclaw_user }}"
    mode: '0755'

- name: Create memory directory
  ansible.builtin.file:
    path: "{{ openclaw_config_dir }}/workspace/memory"
    state: directory
    owner: "{{ openclaw_user }}"
    group: "{{ openclaw_user }}"
    mode: '0755'

- name: Seed workspace files
  ansible.builtin.copy:
    dest: "{{ openclaw_config_dir }}/workspace/{{ item.name }}"
    owner: "{{ openclaw_user }}"
    group: "{{ openclaw_user }}"
    mode: '0644'
    force: false
    content: "{{ item.content }}"
  loop:
    - name: AGENTS.md
      content: "{{ lookup('file', 'files/AGENTS.md') }}"
    - name: SOUL.md
      content: "{{ lookup('file', 'files/SOUL.md') }}"
    - name: TOOLS.md
      content: "{{ lookup('file', 'files/TOOLS.md') }}"
    - name: HEARTBEAT.md
      content: |
        # HEARTBEAT.md
        # Keep empty to skip heartbeat tasks
    - name: BOOTSTRAP.md
      content: "{{ lookup('file', 'files/BOOTSTRAP.md') }}"
